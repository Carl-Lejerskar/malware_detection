# Malware Detection

This repo is concerned with detecting malware in Android applications based on the application's permissions.

Files:
- `eda.ipynb` - Notebook performing both exploratory data analysis and modeling
- `helpers.py` - Python file with some helper functions used during EDA
- `requirements.txt` - Required Python packages for EDA notebook
- `deploy/artifacts` - Folder containing model and preprocessing artifacts from training
- `deploy/requirements.txt` - Required Python packages for training/inference
- `deploy/train.py` - Barebones script to train and save preprocessor/best classifier
- `deploy/serve.py` - Flask server for inference
- `deploy/Dockerfile` - Dockerfile defining inference image
- `deploy/Makefile` - Makefile to build/run a Docker container

## Set Up Virtual Environment for EDA
```
python3.10 -m venv .env
source .venv/bin/activate
pip install -r requirements.txt
```

## Train Best Model
```
# assuming you already have the above venv activated
pip install -r deploy/requirements.txt
python deploy/train.py
```

## Deploying Model (locally)

You should now see some `.pkl` and `.json` files in `deploy/artifacts/`.

Deploying via Docker
```
cd deploy
make build && make run
```

No Docker? No problem!
```
cd deploy
python server.py
```

## Get Predictions
```
curl -X POST http://localhost:8080/predict \
     -H "Content-Type: application/json" \
     -d @artifacts/test_input_positive.json
```
```
 {
  "predictions": [
    1,
    1,
    1,
    1,
    1,
  ]
}
```



